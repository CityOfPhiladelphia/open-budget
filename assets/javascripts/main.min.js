window.OpenBudget={data:{meta:{hierarchy:["Funding Source","Department","Expense Type"],page_title:"City of Philadelphia Budget",description:"",h1:"City of Philadelphia",h2:"Operating Budget",data_link:"https://github.com/CityOfPhiladelphia/open-budget-data-transformer/blob/master/data/FY2014-actual.csv",data_title:"Download Data",uservoice:"",base_headline:"Funding Sources",gross_cost_label:"Expenses",revenue_label:"Revenues",currency_prefix:"$",overview_label:"Overview",deficit_label:"Deficit",surplus_label:"Surplus",data_url:"data/phl/data.json",cache_url:"data/phl/cache.json",value:{label:"FY 2018",type:"accounts",year:"2018"},value2:{label:"FY 2017",type:"accounts",year:"2017"}}}},window.console&&console.log||!function(){for(var t=function(){},e=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","markTimeline","table","time","timeEnd","timeStamp","trace","warn"],n=e.length,r=window.console={};n--;)r[e[n]]=t}(),window.OpenBudget||(window.OpenBudget={}),window.OpenBudget.SVGSupport=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,window.OpenBudget.track=function(t,e,n,r,a){window._gaq||(window._gaq=[]),window.console.log("track event",arguments),window._gaq.push(["_trackEvent",t,e,n,r,a])},$(function(){if(!OpenBudget.SVGSupport){var t=$('<div id="not-supported"></div>');$notSupportedImg=$('<img src="images/browser-teaser.png">'),$notSupportedImg.appendTo(t),t.append('<div class="message"><h2>Browser inkompatibel</h2><p>Leider unterstüzt ihr Browser SVG nicht.<br /><br />Wir empfehlen die neuste Version von <span class="recommendation"></span>.</p></div>'),t.find(".recommendation").html('<a href="http://goo.gl/Z0UIl" target="_blank">Google Chrome</a> oder <a href="http://goo.gl/LwIPJ" target="_blank">Firefox</a>'),$.browser.msie&&t.find(".message").append('<p>Alternativ können sie eine Erweiterung für ihren jetzigen Browser installieren: <a href="http://goo.gl/3i1hs" target="_blank">Google Chrome Frame</a>.<br /><em>Nach der Installation muss Internet Explorer neugestartet werden (alle "Internet Explorer"-Fenster schliessen und wieder öffnen).</em></p>'),t.prependTo("body"),$(window).resize(function(){$notSupportedImg.css("margin-top",$notSupportedImg.height()/-2+"px")}),$(window).load(function(){$(window).resize()}),OpenBudget.track("Setup","browser warning shown",void 0,void 0,!0)}}),$(function(){OpenBudget.table=function(){var t=$("#table"),e=t.find("thead"),n=t.find("tbody"),r=(e.find(".overview").detach(),n.find("tr.overview").detach(),e.find(".compare").detach()),a=n.find("tr.compare").detach(),i=$(".breadcrumb"),o=d3.format(",f"),c=d3.format("+.2"),s=(d3.format(".2f"),{cleanId:function(t){return t.replace(/revenue-|gross_cost-/,"")},cleanIdFromTr:function(t){return $.trim($(t).attr("id").replace(/^tr-/,""))},removeCircleHighlight:function(){d.classed("hover",0)}}),d=d3.select();n.on("mouseover","tr",function(){s.removeCircleHighlight();var t=s.cleanIdFromTr(this);d=d3.selectAll("svg circle#c-revenue-"+t+", svg circle#c-gross_cost-"+t).classed("hover",1)}).on("mouseout","tr",s.removeCircleHighlight);var u=OpenBudget.data.meta.hierarchy,l={highlight:function(t){n.find("tr").removeClass("hover"),t&&n.find("#tr-"+s.cleanId(t)).addClass("hover")},show:function(d){t.stop(!0).animate({opacity:0},{complete:function(){var l=[],p={};_.each(d,function(t){var e=s.cleanId(t.id);if("surplus"!=e){var n=p[e];void 0===n&&(n=l.length,l.push({name:t.name,id:e,nodes:{}}),p[e]=n);var r=l[n];r.nodes[t.type]=t}}),e.empty(),n.empty(),breadcrumbItems=[];var f=function(t){t&&(breadcrumbItems.unshift(t.name),f(t.parent))},h=l[0],g="gross_cost";r.clone().appendTo(e).find("th:eq(0)").text(u[h.nodes[g].depth]),_.each(l,function(t){var e=a.clone(),r=t.nodes[g];e.attr("id","tr-"+t.id),e.find(".name").text(t.name),e.find(".value").text(o(r.value)),e.find(".diff").text(c(t.nodes[g].diff)+"%").css("color",r.stroke).attr("data-toggle","tooltip").attr("data-container","body").attr("title","Percent Change between FY15 and FY16"),e.find(".value2").text(o(r.value2)),n.append(e)});var v=a.clone();v.attr("id","tr-total"),v.addClass("total"),v.find(".name").text("Total"),v.find(".value").text(o(_.reduce(l,function(t,e){return t+e.nodes[g].value},0))),v.find(".value2").text(o(_.reduce(l,function(t,e){return t+e.nodes[g].value2},0))),n.append(v),h.nodes[g].depth<3&&n.find("tr").click(function(){d3.select("#c-"+g+"-"+s.cleanIdFromTr(this)).each(function(t,e){s.removeCircleHighlight(),OpenBudget.visualisation.zoomIn.apply(this,[t,e])})}).css("cursor","pointer"),f(h.nodes[g].parent),breadcrumbItems.unshift(OpenBudget.data.meta.base_headline);var m=breadcrumbItems.length;i.empty(),_.each(breadcrumbItems,function(t,e){var n=$("<li></li>");n.text(t),m>e+1&&n.click(function(){OpenBudget.visualisation.zoomOut()}).css("cursor","pointer"),n.appendTo(i)}),t.animate({opacity:1})}})}};return l}()}),OpenBudget.nodes=function(){var t,e={right:{x:0,y:0},topRight:{x:0,y:0},middle:{x:0,y:0},topMiddle:{x:0,y:0},left:{x:0,y:0},topLeft:{x:0,y:0}},n=function(){t={gross_cost:{value:0,value2:0}}};n();var r=function(t,e,n){var r=e.type,a=n.type,i=e.year,o=n.year;return function(e){var n,c=e[t],s=c&&c[r]?c[r][i]||0:0,d=c&&c[a]?c[a][o]||0:0;return(s>0||d>0)&&(n={value:s,value2:d}),n}},a=OpenBudget.data.meta,i={gross_cost:r("gross_cost",a.value,a.value2)},o=function(t,e){if(!e)return 100;var n=t-e;return d3.round(n/(e/100),2)},c=function(t,e){return e?d3.round(t/e*100,2):100},s=function(n,r,a){if(a){var s=a.type,d=a.depth+1,p=i[s](r);if(p){var f={name:r.name,value:p.value,value2:p.value2,diff:o(p.value,p.value2),proportion:void 0!==a.value?c(p.value,a.value):null,type:s,depth:d,children:[]};return d?(f.parent=a,f.id=a.id+"-"+(r.number||n),a.children.push(f)):(f.center=e.middle,f.id=s+"-"+(r.number||n),u.push(f),t[s].value+=p.value,t[s].value2+=p.value2,f.name=$.trim(f.name.replace(/^Direktion für/,""))),l.push(f),f}}},d=function(t,e,n){return n||(n={gross_cost:{depth:-1,type:"gross_cost"}}),{gross_cost:s(t,e,n.gross_cost)}},u=[],l=[],p=d3.scale.sqrt(),f=2,h=d3.layout.force().gravity(-.01).friction(.9).alpha(.01).charge(function(t){return-Math.pow(t.radius,2)/16}),g=50,v=function(t,e){return function(n){var r=e,a=.13*t;n.x+=(r-n.x)*a,n.y+=(r-n.y)*a}},m=function(t,e){return e.value-t.value},y={process:function(t){var e=function(t,n){_.each(t,function(r){key=r.id,t=d(key,r,n),r.children&&e(r.children,t)})};e(t);var n=d3.scale.linear().domain([-20,0,20]).clamp(!0).range(["rgb(230,20,20)","rgb(255,255,230)","rgb(20,230,20)"]);_.each(l,function(t){var e=d3.rgb(n(t.diff));t.fill="rgb("+e.r+","+e.g+","+e.b+")",t.stroke=e.darker().toString()});var r=function(t){t.sort(m),_.each(t,function(t){t.children&&r(t.children)})};r(l)},setup:function(){var t=function(t){return t.value},e=d3.max(l,t),n=d3.min(l,t);p.domain([0,d3.max([e,Math.abs(n)])])},createCache:function(){var t=function(t){u=[],l=[],n(),y.process(t),y.setup(),y.resize(1920,1080),g*=10;var e=function(t){var n=300/d3.max(t,function(t){return t.unscaledRadius});_.each(t,function(t){t.children&&(y.stuffChildren(t,n),e(t.children))})};e(u),g/=10;var r=function(t){_.each(t,function(t){t.parent=void 0,t.center=void 0,t.children&&r(t.children)})};r(u),console.log(u)},e=OpenBudget.data.meta.data_url;e?$.ajax({dataType:"json",url:e,success:t,cache:!1}):t(OpenBudget.data.nodes)},loadFromCache:function(t){var n=function(n){u=n;var r=function(t){_.each(t,function(t){t.depth||(t.center=e.middle),t.children&&(_.each(t.children,function(e){e.parent=t}),r(t.children)),l.push(t)})};r(u),y.setup(),y.calculateRadius(),t(u)},r=OpenBudget.data.meta.cache_url;r?$.ajax({dataType:"json",url:r,success:n,cache:!0}):n(OpenBudget.data.cache)},load:function(t){var e=function(e){y.process(e),y.setup(),t(u)},n=OpenBudget.data.meta.data_url;n?$.ajax({dataType:"json",url:n,success:e,cache:!0}):e(OpenBudget.data.nodes)},resize:function(t,n){e.middle.x=t/2,e.middle.y=n/2,e.topMiddle.x=e.middle.x,e.topMiddle.y=e.middle.y/5,e.left.x=t/4,e.left.y=n/2,e.topLeft.x=e.left.x,e.topLeft.y=e.left.y/3,e.right.x=t/4*3,e.right.y=n/2,e.topRight.x=e.right.x,e.topRight.y=e.right.y/3,p.range([0,t/(u.length/1.5)]),y.calculateRadius()},calculateRadius:function(){for(var t,e,n=0,r=l.length;r>n;)t=l[n],e=p(t.value),t.unscaledRadius=e,t.radius=e*f,n+=1},setRadiusScaleFactor:function(t){f=t},stuffChildren:function(t,e){var n,r,a=t.children||{},i=a.length,o=void 0!==e?t.unscaledRadius*e:t.radius,c=2*o;if(i&&!t.stuffedChildrenRadius){if(void 0!==e)for(n=0;i>n;)r=a[n],r.radius=r.unscaledRadius*e,n+=1;h.size([c,c]).nodes(a),h.on("tick",function(t){for(var e,n=0,r=a,c=i,s=v(t.alpha,o);c>n;)e=r[n],s(e),n+=1}).start();var s,d=6*i;for(g>d&&(d=g),s=0;d>s;s+=1)h.tick();for(h.stop(),n=0;i>n;)r=a[n],r.sx=r.x,r.sy=r.y,r.sr=r.radius,n+=1;t.stuffedChildrenRadius=o}},centers:e};return y}(),$(function(){OpenBudget.visualisation=function(){var t,e,n=OpenBudget.nodes,r=$(window),a=$("svg#canvas"),i=($("#sidebar"),$("body")),o=$(".site-header"),c=$(".site-header-divider"),s=$(".site-footer"),d=d3.select("body").select("svg#canvas"),u=d.select("defs"),l=d3.layout.force().gravity(0).friction(.9).charge(0).alpha(.5),p={data:[{type:"gross_cost",defaultText:OpenBudget.data.meta.base_headline,text:OpenBudget.data.meta.base_headline,center:n.centers.topMiddle}],withType:{},setup:function(){f=d.selectAll("text.headline").data(p.data),f.enter().append("text").attr("id",z.headlineId).classed("headline",1).attr("text-anchor","middle").text(function(t){return t.text}),_.each(p.data,function(t){p.withType[t.type]=d3.select("#"+z.headlineId(t)),t.pos=t.center,t.opacity=1})},transition:function(){f.transition().duration(d3.event&&d3.event.altKey?7500:750).attr("x",function(t){return t.pos.x}).attr("y",function(t){return t.pos.y}).style("opacity",function(t){return t.opacity}).text(function(t){return t.text})},focus:function(t,e){var r=t.depth||e?t.type:!1;_.each(p.data,function(a){a.type==r?(a.pos=n.centers.topMiddle,a.opacity=1):(a.pos=a.center,a.opacity=r?0:1),a.text=e?t.name:void 0!==t.parent?t.parent.name:a.defaultText}),p.transition()}},f=d3.select(),h=d3.select(),g=d3.select(),v=d3.select(),m=d3.select(),y=d3.select(),x=d3.select(),b=function(t){var e=d3.hsl(t);return e.s=0,e.toString()},w=function(t){var e=t.radius+16,n=t.x-e,r=t.x+e,a=t.y-e,i=t.y+e;return function(e,o,c,s,d){if(e.point&&e.point!==t){var u=t.x-e.point.x,l=t.y-e.point.y,p=Math.sqrt(u*u+l*l),f=t.radius+e.point.radius;f>p&&(p=(p-f)/p*.5,t.x-=u*=p,t.y-=l*=p,e.point.x+=u,e.point.y+=l)}return o>r||n>s||c>i||a>d}},k=function(t){var e,n,r,a,i,o=h,c=h.length;for(e=d3.geom.quadtree(o),n=0,r=.1*t.alpha;c>n;)a=o[n],i=a.center||{x:a.parent.radius,y:a.parent.radius},a.x+=(i.x-a.x)*r,a.y+=(i.y-a.y)*r,e.visit(w(a)),n+=1},O=function(t){k(t),g.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}),v.attr("transform",z.transform)},B={setActiveNodes:function(t){g&&g.on("mousedown.drag",null).on("touchstart.drag",null),h=t.nodes,g=t.circles||d3.select(),v=t.groups||d3.select(),m=t.clipPaths||d3.select(),y=t.textPaths||d3.select(),x=t.text||d3.select(),l.nodes(h),g.call(l.drag)},labelFontSize:15,resize:function(r){t=a.parent().outerWidth(),e=i.height()-o.height()-c.height()-s.height(),"function"==typeof r&&r(),d.attr("width",t).attr("height",e),l.size([t,e]),n.resize(t,e),g.attr("r",z.r),m.selectAll("circle").attr("r",z.computedRadius).attr("cx",z.computedRadius).attr("cy",z.computedRadius),y.attr("d",function(t){var e=B.labelFontSize/z.scale(t),n=z.computedRadius(t)-e;return 2*e>n?null:"M"+e+","+(n+e)+" a"+n+","+n+" 0 1,1 "+n+","+n}),x.style("font-size",function(t){return B.labelFontSize/z.scale(t)+"px"}),v.attr("transform",z.transform),p.transition(),l.resume()}},z={scale:function(t){return t.computedRadius?t.radius/t.computedRadius:1},transform:function(t){var e=t.radius;return"translate("+(t.x-e)+","+(t.y-e)+") scale("+z.scale(t)+")"},centerTransform:function(t){var e=t.radius,r=t.parent,a=r?{x:r.centerRadius,y:r.centerRadius}:n.centers.middle;return t.centerRadius=e,"translate("+(a.x-e)+","+(a.y-e)+") scale(1)"},cx:function(t){return t.x},cy:function(t){return t.y},scx:function(t){return t.x=t.sx,t.x},scy:function(t){return t.y=t.sy,t.y},r:function(t){return t.radius},sr:function(t){return t.sr},computedRadius:function(t){return t.computedRadius||t.radius},classWithParent:function(t,e){return e=e?" "+e:"","p-"+t+e},classWithParentAndLevel:function(t,e){return z.classWithParent(t,"l-"+e)},cid:function(t){return"c-"+t.id},gid:function(t){return"g-"+t.id},clipPathId:function(t){return"clip-path-"+t.id},clipPathUrl:function(t){return"url(#"+z.clipPathId(t)+")"},textPathId:function(t){return"text-path-"+t.id},textPathHref:function(t){return"#"+z.textPathId(t)},name:function(t){return t.name},reject:function(t){return function(e){return e==t?null:this}},diffAccessor:function(t){return t.diff},headlineId:function(t){return"headline-"+t.type}},S={stack:[],all:[],current:function(){return S.getAtStackPos(S.stack.length-1)},getAtStackPos:function(t){return S.all[S.stack[t]]},setup:function(t,e){var r,a=S.all.length;"string"==typeof e?(r=e,parentSelection=d):(r=e.id,parentSelection=d3.select("#g-"+r));var i=parentSelection.selectAll("circle.p-"+r+", circle.l-"+a).data(t),o=u.selectAll("clipPath.l-"+a).data(t),c=u.selectAll("path.l-"+a).data(t),s=parentSelection.selectAll("g.p-"+r+", g.l-"+a).data(t);i.enter().append("circle").attr("id",z.cid),i.attr("class",z.classWithParentAndLevel(r,a)),o.enter().append("clipPath").attr("id",z.clipPathId).append("circle"),o.attr("class",z.classWithParentAndLevel(r,a)),c.enter().append("path").attr("id",z.textPathId).attr("class",z.classWithParentAndLevel(r,a));var l=s.enter().append("g").attr("id",z.gid);s.attr("class",z.classWithParentAndLevel(r,a)).attr("clip-path",z.clipPathUrl),s.each(function(t){var e=t.children||{},r=e.length;if(!(1>r)){var a=t.id;n.stuffChildren(t),t.computedRadius=t.stuffedChildrenRadius;var i=d3.select("#g-"+t.id);i.classed("blur",1);var o=i.selectAll("circle").data(e);o.enter().append("circle").attr("id",z.cid).attr("class",z.classWithParent(a,"blur")).attr("cx",z.scx).attr("cy",z.scy).attr("r",z.sr).style("fill",function(t){return t.parent.fill}).style("stroke",function(t){return t.parent.stroke})}});var p=l.append("text").append("textPath").attr("xlink:href",z.textPathHref).text(z.name);return S.all[a]={nodes:t,circles:i,groups:s,clipPaths:o,text:p,textPaths:c},a},push:function(t,e){var n=S.current();n&&(n.parent=e),S.stack.push(t);var r=S.all[t];OpenBudget.table.show(r.nodes);var a,i,o,c=S.stack.length-2;for(a=0;c>a;a+=1)i=S.stack[a],o=S.all[i],o.hidden||(o.hidden=!0,d.selectAll(".l-"+i+":not(#g-"+o.parent.id+")").transition().duration(750).style("opacity",0));r.circles.on("click",S.zoomIn)},pop:function(){var t=S.stack.pop();if(S.stack.length>1){var e=S.stack[S.stack.length-2],n=S.all[e],r=n.parent.id;n.hidden&&(n.hidden=!1,d.select("#c-"+r).transition().duration(750).style("opacity",.8))}return OpenBudget.table.show(S.current().nodes),S.all[t]},zoomIn:function(){var r=this.__data__,a=d3.select(this),i=d3.select("#g-"+r.id),o=i.node(),c=r.children;if(!(r.depth+1<S.stack.length)){if(d3.event&&d3.event.stopPropagation(),l.stop(),!c||c.length<1)return void OpenBudget.track("Visualisation","zoom in blocked",r.id);OpenBudget.track("Visualisation","zoom in",r.id),p.focus(r,!0);var s=S.current(),d=S.setup(c,r),u=S.all[d];S.push(d,r);var f=Math.min(t,e)/3,h=r.unscaledRadius,g=f/h,v=z.reject(r),m=s.circles.filter(v),y=s.groups.filter(v);n.setRadiusScaleFactor(g),n.calculateRadius(),r.computedRadius=void 0;var x=d3.event&&d3.event.altKey?7500:750;o.parentNode.appendChild(o),a.classed("shadow-parent",1),a.transition().duration(x).attr("cx",function(e){return e.parent&&e.radius||t/2}).attr("cy",function(t){return t.parent&&t.radius||e/2}).attr("r",2*r.radius).style("opacity",.8).style("fill",function(t){return b(t.fill)}).style("stroke",function(t){return b(t.stroke)}),i.select("text").transition().duration(x/10).style("opacity",0),m.transition().duration(x).attr("cy",function(t){return e+t.radius}).style("fill",function(t){return b(t.fill)}).style("stroke",function(t){return b(t.stroke)}).style("opacity",.2),y.selectAll("circle").transition().duration(x).style("fill",function(t){return b(t.parent.fill)}).style("stroke",function(t){return b(t.parent.stroke)}),y.transition().duration(x/10).style("opacity",0),i.attr("clip-path","none").classed("blur",0),i.transition().duration(x).attr("transform",z.centerTransform).style("opacity",1),B.setActiveNodes(u),l.on("tick",k),l.start();var w,_=50;for(w=0;_>w;w+=1)l.tick();l.stop();{Math.floor(x/2)}u.circles.transition().duration(x).attr("r",z.r).attr("cx",z.cx).attr("cy",z.cy).style("fill",function(t){return t.fill}).style("stroke",function(t){return t.stroke}),u.groups.transition().duration(x).attr("transform",z.transform),setTimeout(function(){l.on("tick",O),l.start(),B.resize(),i.selectAll("g").transition().duration(75).style("opacity",.7)},x)}},zoomOut:function(){if(!(S.stack.length<2)){l.stop();var r,a=S.pop(),i=S.current(),o=i.nodes[0].parent;r=o?Math.min(t,e)/3/o.unscaledRadius:2,n.setRadiusScaleFactor(r),n.calculateRadius();var c=d3.event&&d3.event.altKey?7500:750,s=c/10;i.circles.transition().duration(c).attr("cx",z.cx).attr("cy",z.cy).attr("r",z.r).style("opacity",1).style("fill",function(t){return t.fill}).style("stroke",function(t){return t.stroke});var d=a.circles,u=a.groups;u.transition().duration(s).style("opacity",0).remove(),B.setActiveNodes(i),d.transition().duration(c).attr("r",z.sr).attr("cx",z.scx).attr("cy",z.scy).style("fill",function(t){return t.parent.fill}).style("stroke",function(t){return t.parent.stroke});var f=d3.select("#g-"+a.nodes[0].parent.id),h=f.datum(),g=d3.select("#c-"+a.nodes[0].parent.id);g.classed("shadow-parent",0),p.focus(h),h.computedRadius=h.stuffedChildrenRadius,OpenBudget.track("Visualisation","zoom out",h.id),i.groups.filter(z.reject(h)).selectAll("circle").transition().duration(c).style("fill",function(t){return t.parent.fill}).style("stroke",function(t){return t.parent.stroke}),f.transition().duration(c).attr("transform",z.transform),i.groups.classed("blur",1).transition().delay(c-s).duration(s).attr("clip-path",z.clipPathUrl).style("opacity",.7),f.select("text").transition().delay(c-s).duration(s).style("opacity",.6),setTimeout(function(){B.resize()},c)}}},R=function(){p.setup();var t=!!OpenBudget.data.meta.cache_url;$("html").hasClass("oldie")&&(t=!1),n[t?"loadFromCache":"load"](function(e){r.resize(B.resize),t||B.resize();var n=S.setup(e,"root"),a=S.all[n],i=a.circles,o=a.groups;B.setActiveNodes(a),l.start(),i.attr("cx",z.cx).attr("cy",z.cy).style("fill",function(t){return t.fill}).style("stroke",function(t){return t.stroke}).call(l.drag),o.attr("transform",z.transform).style("opacity",.7),B.resize(),l.on("tick",O),S.push(n),d.on("click",S.zoomOut),OpenBudget.track("Visualisation","initialized",void 0,void 0,!0)})};return{init:R,zoomIn:S.zoomIn,zoomOut:S.zoomOut}}()}),OpenBudget.tooltip=function(){var t=$("body"),e=d3.format(",f"),n=d3.format("+.2"),r=$('<div id="tooltip"></div>').html("<div></div>").hide().appendTo(t),a=r.find("div");$(document).mousemove(function(t){r.css({top:t.pageY+0,left:t.pageX+10})}),$(document).on("mouseover","svg#canvas circle",function(){var t=this.__data__,i="",o=OpenBudget.data.meta.currency_prefix;("revenue"==t.type||"gross_cost"==t.type)&&(i=OpenBudget.data.meta[t.type+"_label"]+": "),a.html('<span class="name">'+t.name+"</span><br />"+i+o+e(t.value)+' <span class="percent">'+n(t.diff)+"%</span>"),a.find("span.percent").css("color",t.stroke),r.show(),OpenBudget.table.highlight(t.id)}),$(document).on("mouseout","svg#canvas circle",function(){r.hide(),OpenBudget.table.highlight(null)})}(),$(function(){var t=function(){OpenBudget.visualisation.init()};OpenBudget.SVGSupport?t():($('<div class="try">trotzdem versuchen</div>').appendTo("#not-supported .message"),OpenBudget.track("Setup","browser warning try anyway shown",void 0,void 0,!0),$("#not-supported .try").click(function(){$("#not-supported").fadeOut(),OpenBudget.track("Setup","browser warning try anyway clicked",void 0,void 0,!0),t(),OpenBudget.track("Setup","browser warning try anyway initialized",void 0,void 0,!0)}))}),$(document).foundation(),$("abbr").foundation("tooltip"),$(document).ajaxStart(function(){NProgress.start()}).ajaxStop(function(){NProgress.done()}),$(document).ready(function(){$("#toggle").click(function(t){$("#sidebar-parent").toggle(),$(t.currentTarget).text("Visualization"===$(t.currentTarget).text()?"Table":"Visualization"),t.preventDefault()})});